{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { per_page } from './pixabay-api';\nconst gap = 24;\nlet gallery = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst createGallery = (images, page) => {\n  if (parseInt(images.data.totalHits) > 0) {\n    const html = images.data.hits\n      .map(\n        ({\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<li class=\"gallery-item\"><a href=\"${largeImageURL}\"><img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n            <div class=\"legend\">\n  <div class=\"field\">\n    <span class=\"label\">Likes</span>\n    <span class=\"value\">${likes}</span>\n  </div>\n  <div class=\"field\">\n    <span class=\"label\">Views</span>\n    <span class=\"value\">${views}</span>\n  </div>\n  <div class=\"field\">\n    <span class=\"label\">Comments</span>\n    <span class=\"value\">${comments}</span>\n  </div>\n  <div class=\"field\">\n    <span class=\"label\">Downloads</span>\n    <span class=\"value\">${downloads}</span>\n  </div>\n</div></li>`;\n        }\n      )\n      .join('');\n    document.querySelector('.gallery').insertAdjacentHTML('beforeend', html);\n    gallery.refresh();\n    hideLoader();\n    if (page > 2) {\n      offSet();\n    }\n    if (page > Math.ceil(parseInt(images.data.totalHits) / per_page)) {\n      hideLoadMoreButton();\n      return iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: '#90CAF9',\n        position: 'topRight',\n      });\n    } else showLoadMoreButton();\n  } else {\n    iziToast.show({\n      title: 'Error',\n      titleColor: '#FFFFFF',\n      titleSize: '16px',\n      titleLineHeight: '1.5',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      close: true,\n      progressBar: true,\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n    clearGallery();\n    hideLoadMoreButton();\n    hideLoader();\n  }\n};\n\nconst offSet = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  window.scrollBy({\n    top: 2 * (galleryItem.getBoundingClientRect().height + gap), // adding gaps\n    behavior: 'smooth',\n  });\n};\n\nexport const clearGallery = () => {\n  document.querySelector('.gallery').innerHTML = '';\n};\nexport const hideLoader = () => {\n  document.querySelector('.loader').style.display = 'none';\n};\nexport const showLoader = () => {\n  document.querySelector('.loader').style.display = 'flex';\n};\nexport const showLoadMoreButton = () => {\n  document.querySelector('.loadMoreBtn').style.display = 'flex';\n};\nexport const hideLoadMoreButton = () => {\n  document.querySelector('.loadMoreBtn').style.display = 'none';\n};\n\nexport default createGallery;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport createGallery from './render-functions';\nimport { clearGallery } from './render-functions';\nimport { hideLoader } from './render-functions';\nimport { hideLoadMoreButton } from './render-functions';\n\nconst myApiKey = '49502149-61d0264429aca11602d0077d5';\nexport const per_page = 15;\n\nconst getImagesByQuery = async (query, page) => {\n  try {\n    const images = await axios.get(\n      `https://pixabay.com/api/?key=${myApiKey}&q=${encodeURIComponent(\n        query\n      )}&image_type=photo&per_page=${per_page}&page=${page}`\n    );\n    createGallery(images, page + 1);\n  } catch (error) {\n    hideLoader();\n    clearGallery();\n    hideLoadMoreButton();\n    iziToast.error({\n      message: `${error}`,\n      backgroundColor: '#EF4040',\n      close: true,\n      position: 'topRight',\n    });\n  }\n};\n\nexport default getImagesByQuery;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getImagesByQuery from './js/pixabay-api';\nimport { clearGallery } from './js/render-functions';\nimport { hideLoadMoreButton } from './js/render-functions';\nimport { showLoader } from './js/render-functions';\n\nlet query = '';\nlet page;\nconst form = document.querySelector('.form');\nconst moreBtn = document.querySelector('.loadMoreBtn');\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  query = form.elements.searchText.value.trim();\n  if (!query) {\n    iziToast.error({\n      message: 'Please fill out the field',\n      backgroundColor: '#EF4040',\n      close: true,\n      position: 'topRight',\n    });\n    return;\n  }\n  showLoader();\n  form.reset();\n  getImagesByQuery(query, page);\n  page += 1;\n});\nmoreBtn.addEventListener('click', evt => {\n  hideLoadMoreButton();\n  showLoader();\n  getImagesByQuery(query, page);\n  page += 1;\n});\n"],"names":["gap","gallery","SimpleLightbox","createGallery","images","page","html","largeImageURL","webformatURL","tags","likes","views","comments","downloads","hideLoader","offSet","per_page","hideLoadMoreButton","iziToast","showLoadMoreButton","clearGallery","galleryItem","showLoader","myApiKey","getImagesByQuery","query","axios","error","form","moreBtn","evt"],"mappings":"owBAKA,MAAMA,EAAM,GACZ,IAAIC,EAAU,IAAIC,EAAe,kBAAmB,CAClD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAgB,CAACC,EAAQC,IAAS,CACtC,GAAI,SAASD,EAAO,KAAK,SAAS,EAAI,EAAG,CACvC,MAAME,EAAOF,EAAO,KAAK,KACtB,IACC,CAAC,CACC,cAAAG,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB,qCAAqCN,CAAa,mCAAmCC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,0BAItGC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0BAIRC,CAAS;AAAA;AAAA,YAI5B,EACA,KAAK,EAAE,EAOV,GANA,SAAS,cAAc,UAAU,EAAE,mBAAmB,YAAaP,CAAI,EACvEL,EAAQ,QAAO,EACfa,IACIT,EAAO,GACTU,IAEEV,EAAO,KAAK,KAAK,SAASD,EAAO,KAAK,SAAS,EAAIY,CAAQ,EAC7D,OAAAC,IACOC,EAAS,KAAK,CACnB,SAAU,WACV,QAAS,6DACT,gBAAiB,UACjB,SAAU,UAClB,CAAO,EACIC,EAAkB,CAC7B,MACID,EAAS,KAAK,CACZ,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,MACjB,QACE,2EACF,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,kBAAmB,MACnB,MAAO,GACP,YAAa,GACb,iBAAkB,UAClB,SAAU,UAChB,CAAK,EACDE,IACAH,IACAH,GAEJ,EAEMC,EAAS,IAAM,CACnB,MAAMM,EAAc,SAAS,cAAc,eAAe,EAC1D,OAAO,SAAS,CACd,IAAK,GAAKA,EAAY,sBAAqB,EAAG,OAASrB,GACvD,SAAU,QACd,CAAG,CACH,EAEaoB,EAAe,IAAM,CAChC,SAAS,cAAc,UAAU,EAAE,UAAY,EACjD,EACaN,EAAa,IAAM,CAC9B,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,MACpD,EACaQ,EAAa,IAAM,CAC9B,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,MACpD,EACaH,EAAqB,IAAM,CACtC,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,MACzD,EACaF,EAAqB,IAAM,CACtC,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,MACzD,EClGMM,EAAW,qCACJP,EAAW,GAElBQ,EAAmB,MAAOC,EAAOpB,IAAS,CAC9C,GAAI,CACF,MAAMD,EAAS,MAAMsB,EAAM,IACzB,gCAAgCH,CAAQ,MAAM,mBAC5CE,CACD,CAAA,8BAA8BT,CAAQ,SAASX,CAAI,EAC1D,EACIF,EAAcC,EAAQC,EAAO,CAAC,CAC/B,OAAQsB,EAAO,CACdb,IACAM,IACAH,IACAC,EAAS,MAAM,CACb,QAAS,GAAGS,CAAK,GACjB,gBAAiB,UACjB,MAAO,GACP,SAAU,UAChB,CAAK,CACF,CACH,ECvBA,IAAIF,EAAQ,GACRpB,EACJ,MAAMuB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,cAAc,EACrDD,EAAK,iBAAiB,SAAUE,GAAO,CAMrC,GALAA,EAAI,eAAc,EAClBzB,EAAO,EACPe,IACAH,IACAQ,EAAQG,EAAK,SAAS,WAAW,MAAM,KAAI,EACvC,CAACH,EAAO,CACVP,EAAS,MAAM,CACb,QAAS,4BACT,gBAAiB,UACjB,MAAO,GACP,SAAU,UAChB,CAAK,EACD,MACD,CACDI,IACAM,EAAK,MAAK,EACVJ,EAAiBC,EAAOpB,CAAI,EAC5BA,GAAQ,CACV,CAAC,EACDwB,EAAQ,iBAAiB,QAASC,GAAO,CACvCb,IACAK,IACAE,EAAiBC,EAAOpB,CAAI,EAC5BA,GAAQ,CACV,CAAC"}