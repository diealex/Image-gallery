{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { per_page } from './pixabay-api';\n\nlet gallery = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst renderFnc = (response, page) => {\n  if (parseInt(response.data.totalHits) > 0) {\n    const html = response.data.hits\n      .map(\n        ({\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<li class=\"gallery-item\"><a href=\"${largeImageURL}\" class=\"gallery-img\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n            <div class=\"legend\">\n  <div class=\"field\">\n    <span class=\"label\">Likes</span>\n    <span class=\"value\">${likes}</span>\n  </div>\n  <div class=\"field\">\n    <span class=\"label\">Views</span>\n    <span class=\"value\">${views}</span>\n  </div>\n  <div class=\"field\">\n    <span class=\"label\">Comments</span>\n    <span class=\"value\">${comments}</span>\n  </div>\n  <div class=\"field\">\n    <span class=\"label\">Downloads</span>\n    <span class=\"value\">${downloads}</span>\n  </div>\n</div></li>`;\n        }\n      )\n      .join('');\n    document.querySelector('.gallery').insertAdjacentHTML('beforeend', html);\n    gallery.refresh();\n    document.querySelector('.loader').style.display = 'none';\n    if (page > Math.ceil(parseInt(response.data.totalHits) / per_page)) {\n      document.querySelector('.loadMoreBtn').style.display = 'none';\n      return iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: '#90CAF9',\n        position: 'topRight',\n      });\n    } else document.querySelector('.loadMoreBtn').style.display = 'flex';\n  } else {\n    iziToast.show({\n      title: 'Error',\n      titleColor: '#FFFFFF',\n      titleSize: '16px',\n      titleLineHeight: '1.5',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      close: true,\n      progressBar: true,\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n    document.querySelector('.gallery').innerHTML = '';\n    document.querySelector('.loadMoreBtn').style.display = 'none';\n    document.querySelector('.loader').style.display = 'none';\n  }\n};\n\nexport default renderFnc;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport renderFnc from './render-functions';\n\nconst myApiKey = '49502149-61d0264429aca11602d0077d5';\nexport const per_page = 15;\n\nconst serverRequest = async (searchWord, page) => {\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?key=${myApiKey}&q=${encodeURIComponent(\n        searchWord\n      )}&image_type=photo&per_page=${per_page}&page=${page}`\n    );\n    renderFnc(response, page + 1);\n  } catch (error) {\n    document.querySelector('.loader').style.display = 'none';\n    document.querySelector('.gallery').innerHTML = '';\n    document.querySelector('.loadMoreBtn').style.display = 'none';\n    iziToast.error({\n      message: `${error}`,\n      backgroundColor: '#EF4040',\n      close: true,\n      position: 'topRight',\n    });\n  }\n};\n\nexport default serverRequest;\n\n// const fetchPostsBtn = document.querySelector('.btn');\n// const postList = document.querySelector('.posts');\n\n// let page = 1;\n// let perPage = 10;\n\n// fetchPostsBtn.addEventListener('click', async () => {\n//   try {\n//     const posts = await fetchPosts();\n//     renderPosts(posts);\n//     page += 1;\n\n//     if (page > 1) {\n//       fetchPostsBtn.textContent = 'Fetch more posts';\n//     }\n//   } catch (error) {\n//     console.log(error);\n//   }\n// });\n\n// async function fetchPosts() {\n//   const params = new URLSearchParams({\n//     _limit: perPage,\n//     _page: page,\n//   });\n\n//   const response = await axios.get(\n//     `https://jsonplaceholder.typicode.com/posts?${params}`\n//   );\n//   return response.data;\n// }\n\n// function renderPosts(posts) {\n//   const markup = posts\n//     .map(({ id, title, body, userId }) => {\n//       return `<li>\n//           <h2 class=\"post-title\">${title.slice(0, 30)}</h2>\n//           <p><b>Post id</b>: ${id}</p>\n//           <p><b>Author id</b>: ${userId}</p>\n//           <p class=\"post-body\">${body}</p>\n//         </li>`;\n//     })\n//     .join('');\n//   postList.insertAdjacentHTML('beforeend', markup);\n// }\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport serverRequest from './js/pixabay-api';\n\nlet searchWord = '';\nlet page;\nconst form = document.querySelector('.form');\nconst moreBtn = document.querySelector('.loadMoreBtn');\nform.addEventListener('submit', evt => {\n  page = 1;\n  evt.preventDefault();\n  document.querySelector('.gallery').innerHTML = '';\n  document.querySelector('.loadMoreBtn').style.display = 'none';\n  searchWord = form.elements.searchText.value;\n  document.querySelector('.loader').style.display = 'flex';\n  form.reset();\n  serverRequest(searchWord, page);\n  page += 1;\n});\n\nmoreBtn.addEventListener('click', evt => {\n  moreBtn.style.display = 'none';\n  document.querySelector('.loader').style.display = 'flex';\n  serverRequest(searchWord, page);\n  page += 1;\n});\n"],"names":["gallery","SimpleLightbox","renderFnc","response","page","html","largeImageURL","webformatURL","tags","likes","views","comments","downloads","per_page","iziToast","myApiKey","serverRequest","searchWord","axios","error","form","moreBtn","evt"],"mappings":"owBAMA,IAAIA,EAAU,IAAIC,EAAe,kBAAmB,CAClD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAY,CAACC,EAAUC,IAAS,CACpC,GAAI,SAASD,EAAS,KAAK,SAAS,EAAI,EAAG,CACzC,MAAME,EAAOF,EAAS,KAAK,KACxB,IACC,CAAC,CACC,cAAAG,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB,qCAAqCN,CAAa,mCAAmCC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,0BAItGC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0BAIRC,CAAS;AAAA;AAAA,YAI5B,EACA,KAAK,EAAE,EAIV,GAHA,SAAS,cAAc,UAAU,EAAE,mBAAmB,YAAaP,CAAI,EACvEL,EAAQ,QAAO,EACf,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAC9CI,EAAO,KAAK,KAAK,SAASD,EAAS,KAAK,SAAS,EAAIU,CAAQ,EAC/D,gBAAS,cAAc,cAAc,EAAE,MAAM,QAAU,OAChDC,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,6DACT,gBAAiB,UACjB,SAAU,UAClB,CAAO,EACI,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,MAClE,MACIA,EAAS,KAAK,CACZ,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,MACjB,QACE,2EACF,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,kBAAmB,MACnB,MAAO,GACP,YAAa,GACb,iBAAkB,UAClB,SAAU,UAChB,CAAK,EACD,SAAS,cAAc,UAAU,EAAE,UAAY,GAC/C,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,OACvD,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,MAEtD,EC1EMC,EAAW,qCACJF,EAAW,GAElBG,EAAgB,MAAOC,EAAYb,IAAS,CAChD,GAAI,CACF,MAAMD,EAAW,MAAMe,EAAM,IAC3B,gCAAgCH,CAAQ,MAAM,mBAC5CE,CACD,CAAA,8BAA8BJ,CAAQ,SAAST,CAAI,EAC1D,EACIF,EAAUC,EAAUC,EAAO,CAAC,CAC7B,OAAQe,EAAO,CACd,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAClD,SAAS,cAAc,UAAU,EAAE,UAAY,GAC/C,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,OACvDL,EAAS,MAAM,CACb,QAAS,GAAGK,CAAK,GACjB,gBAAiB,UACjB,MAAO,GACP,SAAU,UAChB,CAAK,CACF,CACH,ECvBA,IAAIF,EAAa,GACbb,EACJ,MAAMgB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,cAAc,EACrDD,EAAK,iBAAiB,SAAUE,GAAO,CACrClB,EAAO,EACPkB,EAAI,eAAc,EAClB,SAAS,cAAc,UAAU,EAAE,UAAY,GAC/C,SAAS,cAAc,cAAc,EAAE,MAAM,QAAU,OACvDL,EAAaG,EAAK,SAAS,WAAW,MACtC,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAClDA,EAAK,MAAK,EACVJ,EAAcC,EAAYb,CAAI,EAC9BA,GAAQ,CACV,CAAC,EAEDiB,EAAQ,iBAAiB,QAASC,GAAO,CACvCD,EAAQ,MAAM,QAAU,OACxB,SAAS,cAAc,SAAS,EAAE,MAAM,QAAU,OAClDL,EAAcC,EAAYb,CAAI,EAC9BA,GAAQ,CACV,CAAC"}